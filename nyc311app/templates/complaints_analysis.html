
<h1>Complaint Main Analysis</h1>
<p>Oleh Dubno & Daniel Argov</p>
<br>
<h3>What can 311 data tell us about life in NYC?</h3>

<hr>

<h2>The Findings</h2>
<br>
<p style="font-size: 20px">Here we'll address each of the graphs you'll find in the tabs above</p>

<h3>The What (Number of Complaints)</h3>
<img src="complaint_analysis_what_3.png" height="400" width="750" style="float: right; margin-right: 1%; margin-bottom: 0.5em;" /> 
<p style="font-size: 20px">
	In the Borough section, we did not cover why a proportion of the complaints were submitted without a Borough specified, which were labeled Unspecified. There are two possible reasons for this: The first being that many of the complaints lacking a Borough did in fact have a city assigned, but the agent submitting the record must not have known which Borough the city aligns to. We had discussed ways of correcting this, and leveraging the columns latitude and longitude to map to zip code would resolve this issue; this is a future endeavor we could pursue post this project. The second reason can be seen in the below bar chart. We can see that the Unspecified borough is almost entirely comprised of the complaint type DOF Literature (Department of Finance Literature). Very interestingly, the NYC 311 legal document has a clause within the <a href="http://www1.nyc.gov/assets/doitt/downloads/pdf/311-privacy-policy.pdf" target="_blank">311-privacy-policy</a> that personal information and location is collected only when “reasonably necessary”) (4.1 Where personal information is reasonably necessary to provide ongoing assistance to a client, the 311 Contact Center shall retain that information that is reasonably sufficient to enable the provision of such service until it is determined that retention is no longer necessary). It is our hypothesis that this clause is the reason for the requests for information such as DOF Literature Request (which clocked in 95 thousand requests over a 5 year period) have no Borough specified. 
</p>

<!-- <center>
<img src="complaint_analysis_what_1.png" height="300" width="600"/> 
</center> -->
<center><img src="complaint_analysis_what_1.png" height="400" width="750"/> </center>
<p style="font-size: 20px">
	Another interesting occurrence we had observed is the correlation between PLUMBING and Water System. If we select only these two complaint types, we see a bizarre incongruence between Boroughs. Why is it that Staten Island and Queens are skewed towards Water System result whilst The Bronx is precisely in the opposing direction, heavily submitting complaints on PLUMBING over Water System. Is one borough more proactive than the other, is the vernacular of the demographics the reason for the differences in semantics?
</p>

<hr>

<h3>The How (long until resolution)</h3>
<center><img src="complaint_analysis_what_2.png" height="400" width="750"/> </center>

<p style="font-size: 20px">
	If we select only Heat/Hot Water (if you recall from the “Borough Main Analysis,” this is the most frequent complaint type in Brooklyn, Manhattan and The Bronx), and compare this with the top three time-to-resolution complaints: Paint/Plaster, Plumbing and Unsanitary Condition, and then bounce back to “The What” section in Complaints and compare this visually, we can view a very interesting phenomena. 
</p>

<center><img src="complaint_analysis_how_1.png" height="400" width="750"/> </center>

<p style="font-size: 20px">
	Heat/Hot Water has a dramatically quicker resolution time than plumbing by an overage of nearly 250 hours! Our intuition points to the fact that Heat/Hot Water has more agency visibility, so again it receives the most attention, ergo sees a quicker resolution time. However, further research may point to other more specific reasons for this multimodality scenario.
</p>

<hr>

<h3>The When</h3>
<img src="complaint_analysis_when_1.png" height="400" width="800" style="float: right; margin-right: 1%; margin-bottom: 0.5em;" /> 
<p style="font-size: 20px">
	Let’s dive in to singling out our highest frequency complaint once again, Heat/Hot Water. We can now see a much more distinct storyline with this time-based line graph. Complaints ramp up starting at 4 am, stay steady at around 1000 complaints per hour from 7 am until dinner time at 5 and 6 pm, and then ramp to its highest level at 10 pm when New York is heading off to sleep (contrary to the idiom, New York does sleep). What’s interesting is when we compare to the top two peaks of complaint, respective of hour.
</p>
<br>
<p style="font-size: 20px">
	Noise - Residential (which is a noise complaint about other residential units) and Street Light Condition. As we can now see, Noise - Residential hits the highest peak of submissions within an hour spread more than any other complaint, with over 1750 complaints within one hour at 11 pm with over 1500 at midnight. Street Light Condition hits just slightly below that number at 11 am, which is interesting, since the sun is up, so complaints about street lights it somewhat puzzling. One explanation may be that people are submitting to 311 to alert them that street lights are remaining on unnecessarily, as good samaritans. So, while Heat/Hot Water is the most frequent complaint all-up, only by using an ordinal line graph we can see these peak calls by two other complaint types which gives a window of understanding in to the life of New Yorkers.
</p>
<center>
<img src="complaint_analysis_when_2.png" height="400" width="800"/> </center>

<h3>The Where</h3>

<p style="font-size: 20px">
	Let’s kick off with a previous revelation from the “Borough Analysis,” where we viewed that Blocked Driveway was a complaint rarely submitted within the Boroughs of Manhattan and Staten Island, but common throughout the other three Boroughs. Here on the below map we can see this geographically. 
</p>

<center><img src="complaints_where_1.png" height="600" width="700"/> </center>

<center><img src="complaints_where_2.png" height="600" width="700"/> </center>

<p style="font-size: 20px">
	Now if we look again at Heat/Hot Water, and alter the Alpha blending to see frequency nodes, we can see that per our previous observations, The Bronx very heavily submits this complaint, however now we can see that it’s not only the most frequent, but also the most densely submitted in a small geographic region/neighborhood.
</p>

<center><img src="complaints_where_3.png" height="600" width="700"/> </center>

<p style="font-size: 20px">
	Looking at Noise (which consists of generally construction and street noise), and Noise - Commercial (complaints about businesses), we can build on our understanding from the “When” section, where we observed that Noise - Commercial was concentrated in the late night, while Noise was submitted during work hours. This makes us believe that Noise - Commercial is likely related to Bars/Pubs. In looking at the below map, we see that the neighborhoods with the largest bar scenes, such as Manhattan’s East Village/Lower East Side and Brooklyn’s Williamsburg, have the heaviest concentration of this complaint, while Manhattan, the most densely populated borough per square mile, sees the most of this complaint.
</p>

<center><img src="complaints_where_4.png" height="600" width="700"/> </center>

<p style="font-size: 20px">
	This insight is truly fascinating. By drilling in to Traffic Signal Condition back in “The What” tab, Manhattan has just under 750 complaints of this type, making it the third most frequent Borough, but when we look at this geographically here in “The Where” section, we can see that almost the entirety of Manhattan’s submissions come from lower Manhattan! Nearly all of Midtown, all of the both the Upper East and West Sides and Harlem have nearly zero complaints of this type. One explanation for this, provided that “The When” tab shows us that the median is at 1pm, is commercial vehicle traffic moving between Manhattan to either Brooklyn over the Williamsburg, Manhattan or Brooklyn bridge or to New Jersey through the Holland Tunnel causes deep congestion. These vehicles are marching against a strict timeline, so frustration at the traffic signal system is high.
</p>


<h2>Data Cleaning Process</h2>
<br>
<center><b><i>Data Cleaning is the same for both Complaints and Boroughs</i></b></center>
<br>
<ul>
	<p style="font-size: 20px">
		There are 191,314 complaints for the month of February. Our goal is to explore each borough and report on what New Yorkers like to complain about. The downside of exploring complaints is that <i>311 data</i> has 221 of them. 
	</p>

	<p style="font-size: 20px">
		In order to account for all complaint types we created our own categories. After doing so, we noticed that we might have over-categorized some complaints. Mapping <i>Street Light Condition</i> and <i>Traffic Signal Condition</i> to just <i>Street Condition</i>, seems like a good idea, until we realized that they both tell a different story and happen during different times. We chose to subset and filter our data by the top 15 most common complaints. This took the data down to 119,877 complaints or 63% of the original dataset.
	</p>

	<p style="font-size: 20px">
		This data set is pretty clean, but still has some missing fields. Of the remaining 119,877 complaints, 4,144 rows of the <b>Borough</b> column are classified as <i>Unspecified</i>. Our interpretation of what this means is that the person who called simply wanted some information rather than to complain and location wasn't necessary. We also noticed that the column <b>City</b>, at times, indicated Newark and the <b>Borough</b> for that complaint in <i>Unclassified</i>. We're assuming that some complaints our made from outside the city.
	</p>
</ul>

<h2>Challenges With Tools</h2>
<ul>
	<p style="font-size: 20px">Here we'll address the challenges that we faced with the tools we chose to use.</p>

	<h3>GitHub</h3>

		<ul style="font-size: 20px">GitHub limits the size of files allowed on their server to 100 mb. Our file is ~125MB.</ul>
		<br>
		<ul style="font-size: 20px">We learned about <b>git LFS</b>, an extension that allows large files to exist on the repo. The large file shows up in github with text pointers on how to retrieve the data from a remote server. Not very helpful, since we're working with publicly available data.</ul>
		<br>
		<ul style="font-size: 20px">We chose to clean the large csv file locally and upload the clean versions of data. They were much smaller.</ul>
		<br>
		<ul style="font-size: 20px">You could get the original file here: <a href="https://nycopendata.socrata.com/api/views/fhrw-4uyv/rows.csv?accessType=DOWNLOAD&query=select+*+where+%60created_date%60+%3E%3D+%272018-02-01T00%3A00%3A00%27+AND+%60created_date%60+%3C+%272018-02-28T23%3A59%3A59%27">DOWNLOAD 311 FEBRUARY DATA (125 MB)</a></ul>

	<h3>Shiny</h3>

		<ul style="font-size: 20px">Shiny is great and we were quick to deploy the app that you're looking at now. Getting up to speed with Navigation Tabs, structing the UI and Server did take some time, but not as much as we thought.</ul>
		<br>
		<ul style="font-size: 20px">We got kicked off of Shiny, several times with a "Disconnected from the server", when using up too much of their free resources. We we're attempting to plot a heat map using ggmap. Running it locally took 10 seconds but the public server couldn't handle it. We settled on saving the image plot we created and sourcing the image locally instead of continuously crashing the server.</ul>
		<br>
		<ul style="font-size: 20px">In the midst of us creating the app, we got an email from Shiny indicating that we used up all of the allotted server time (24 hours). Well, $9 a month isn't bad, so we went for it. We plan to cancel the subscription after the class and settle for the 24 hours of server time for each month.</ul>

	<h3>R Studio</h3>
		<ul style="font-size: 20px">R Studio is the best way to edit R code. Just remember to manually save your work time to time before the computer dies or something crashes. Otherwise, you might lose 2 hours of good work.</ul>
		<br>
		<ul style="font-size: 20px">Time to time we'd like to substitue new code for old without deleting old code. We're in the habit of highlting the code and pressing <b>Cmnd ?</b>, to comment out code. R doesn't seem to support that. Other IDE's do.</ul>

</ul>
