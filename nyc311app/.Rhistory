brushMode = "1d-axes",
reorderable = TRUE)
??parcoords
# http://www.buildingwidgets.com/blog/2015/1/30/week-04-interactive-parallel-coordinates-1
library(parcoords)
parcoords(df_complaints,
brushMode = "1d-axes",
reorderable = FALSE)
ltr <-
read.csv('https://archive.ics.uci.edu/ml/machine-learning-databases/letter-recognition/letter-recognition.data',header=FALSE)
oq <- ltr[ltr[,1]=='O' | ltr[,1]=='Q',]
discparcoord(oq,k=100)
install.packages("discparcoord")
install.packages("discparcoord")
install.packages("cdparcoord")
library(cdparcoord)
library(cdparcoord)
ltr <-
read.csv('https://archive.ics.uci.edu/ml/machine-learning-databases/letter-recognition/letter-recognition.data',header=FALSE)
oq <- ltr[ltr[,1]=='O' | ltr[,1]=='Q',]
discparcoord(oq,k=100)
ltr
oq
ltr <- df_complaints
oq <- ltr[ltr[,1]=='O' | ltr[,1]=='Q',]
discparcoord(oq,k=100)
oq
ltr
ltr[,1]
ltr
ltr <- read.csv('https://archive.ics.uci.edu/ml/machine-learning-databases/letter-recognition/letter-recognition.data',header=FALSE)
oq <- ltr[ltr[,1]=='O' | ltr[,1]=='Q',]
discparcoord(oq,k=100)
ltr
ltr[,1]
ltr[1]
ltr[,1]
ltr <- df_complaints
oq <- ltr[ltr[,1] | ltr[,1],]
ltr <- read.csv('https://archive.ics.uci.edu/ml/machine-learning-databases/letter-recognition/letter-recognition.data',header=FALSE)
oq <- ltr[ltr[,1]=='O' | ltr[,1]=='Q',]
discparcoord(oq,k=100)
oq
discparcoord(df_complaints,k=100)
df_complaints
scale(df_complaints[,2:10]
scale(df_complaints[,2:10])
df_complaints[, col4:= (Value/max(Value))*100, by= Trait]
(df_complaints$0 / ave(df_complaints$0, df_complaints$0, FUN = max)) * 100
as(df_complaints, "realRatingMatrix")
normalize(df_complaints[,2:10])
normalize(df_complaints[,2:10], method="Z-score")
normalize(matrix(df_complaints[,2:10]), method="Z-score")
asmatrix(df_complaints[,2:10])
as(matrix(df_complaints[,2:10]))
as(matrix(df_complaints[,2:10]), "realRatingMatrix")
df$Latitude
df
df <- read.csv("data/311_service_requests_2017.csv", nrow=1000)
snow <- df
snow$na.count <- apply(snow, 1, function(x) sum(x=='M'))
ggplot(snow, aes(x = Longitude, y = Latitude)) +
geom_point(aes(colour = na.count), alpha=.7) +
scale_colour_gradient(low = "grey", high = "green") +
ggtitle("Missing Data by County")
snow <- df
snow$na.count <- apply(snow, 1, function(x) sum(x=='M'))
ggplot(snow, aes(x = Latitude, y = Longitude)) +
geom_point(aes(colour = na.count), alpha=.7) +
scale_colour_gradient(low = "grey", high = "green") +
ggtitle("Missing Data by County")
snow <- df
snow$na.count <- apply(snow, 1, function(x) sum(x=='M'))
ggplot(snow, aes(x = Longitude, y = Latitude)) +
geom_point(aes(colour = na.count), alpha=.7) +
scale_colour_gradient(low = "grey", high = "green") +
ggtitle("Missing Data by County")
library(maps)
??scale
scale(df_complaints[,2:10], scale=FALSE)
scale(df_complaints[,2:10], scale=TRUE)
scale(df_complaints[,2:10], center=FALSE)
scale(df_complaints[,2:10], scale=100)
scale(df_complaints[,2:10], center=[0,100])
scale(df_complaints[,2:10], center=c(0,100))
scale(df_complaints[,2:10], scale=c(0,100))
scale(df_complaints[,2:10], scale=[c(0,100)])
scale(df_complaints[,2:10], scale=[0,100])
scale(df_complaints[,2:10], scale=c([0,100]))
scale(df_complaints[,2:10], center=c([0,100]))
scale(df_complaints[,2:10], center=c([0,100])
scale(df_complaints[,2:10], center=c([0,100]))
scale(df_complaints[,2:10], center = FALSE, scale = max(dat$a, na.rm = TRUE)/100)
scale(df_complaints[,2:10], center = FALSE, scale = max(df_complaints[,2:10], na.rm = TRUE)/100)
fn <- function(x) x * 100/max(x, na.rm = TRUE)
fn(df_complaints)
fn <- function(x) x * 100/max(x, na.rm = TRUE)
data.frame(lapply(dat, fn))
fn <- function(x) x * 100/max(x, na.rm = TRUE)
data.frame(lapply(df_complaints, fn))
fn <- function(x) x * 100/max(x, na.rm = TRUE)
data.frame(lapply(df_complaints[,2:10], fn))
df_complaints
fn <- function(x) x * 100/max(x, na.rm = TRUE)
data.frame(lapply(df_complaints[,2:25], fn))
fn <- function(x) x * 100/max(x, na.rm = TRUE)
df_scaled <- data.frame(lapply(df_complaints[,2:25], fn))
discparcoord(df_scaled,k=100)
# http://www.buildingwidgets.com/blog/2015/1/30/week-04-interactive-parallel-coordinates-1
library(parcoords)
parcoords(df_scaled,
brushMode = "1d-axes",
reorderable = FALSE)
ggparcoord(df_scaled, columns = 2:25, groupColumn = "Complaint.New", scale = "globalminmax")
df_scaled
w = table(df$Borough)
t = as.data.frame(w)
names(t)[1] = 'Borough'
df2 <- t[order(t$Freq, decreasing = TRUE),c(1,2)]
ggplot(df2, aes(reorder(Borough, +Freq), y=Freq)) +
geom_bar(stat = "identity") +
coord_flip()
ggplot(df2, aes(reorder(Complaint.Type, +Freq), y=Freq)) +
geom_bar(stat = "identity") +
coord_flip()
w = table(df$Complaint.Type)
t = as.data.frame(w)
names(t)[1] = 'Complaint.Type'
df2 <- t[order(t$Freq, decreasing = TRUE),c(1,2)]
ggplot(df2, aes(reorder(Complaint.Type, +Freq), y=Freq)) +
geom_bar(stat = "identity") +
coord_flip()
subset(df2, Freq > 1000)
w = table(df$Complaint.Type)
t = as.data.frame(w)
names(t)[1] = 'Complaint.Type'
df2 <- t[order(t$Freq, decreasing = TRUE),c(1,2)]
subset(df2, Freq > 1000)
df2
df <- read.csv("data/311_service_requests_2017.csv", nrow=1000)
df
library(ggplot2)
library(GGally)
library(plyr)
library(tidyverse)
library(reshape2)
library(lubridate)
df <- read.csv("data/311_service_requests_2017.csv", nrow=1000)
library(ggplot2)
library(GGally)
library(plyr)
library(tidyverse)
library(reshape2)
library(lubridate)
noise <- c("Noise - Residential", "Noise - Street/Sidewalk", "Noise", "Noise - Commercial", "Noise - Vehicle", "Noise - Park", "Noise - Helicopter")
building <- c("HEAT/HOT WATER", "Water System", "PLUMBING", "DOOR/WINDOW", "Sewer", "WATER LEAK", "General Construction/Plumbing", "Building/Use", "ELECTRIC", "FLOORING/STAIRS", "Maintenance or Facility", "Elevator", "Lead", "Plumbing", "Housing - Low Income Senior", "Indoor Air Quality", "Electrical", "Water Conservation", "School Maintenance", "Boilers", "Water Quality", "ELEVATOR", "OUTSIDE BUILDING", "Indoor Sewage", "Non-Residential Heat")
parking <- c("Illegal Parking", "Blocked Driveway", "Derelict Vehicle", "Derelict Vehicles", "Vacant Lot", "Derelict Bicycle")
traffic <- c("Traffic Signal Condition", "Traffic")
street.condition <- c("Street Condition", "Street Light Condition", "Damaged Tree", "New Tree Request", "Overgrown Tree/Branches", "Snow", "Dead/Dying Tree", "Broken Muni Meter", "Root/Sewer/Sidewalk Condition", "Air Quality", "Street Sign - Damaged", "Sidewalk Condition","Street Sign - Missing", "Highway Condition", "Illegal Tree Damage", "Standing Water", "Curb Condition", "Violation of Park Rules", "Street Sign - Dangling", "Broken Parking Meter", "Overflowing Litter Baskets")
unsanitary.condition <- c("UNSANITARY CONDITION", "Sanitation Condition", "Missed Collection (All Materials)", "Dirty Conditions")
graffiti <- c("PAINT/PLASTER", "Graffiti")
rodent <- c("Rodent")
general <- c("GENERAL", "Benefit Card Replacement", "Other Enforcement", "Agency Issues", "Opinion for the Mayor", "Housing Options", "Request Xmas Tree Collection", "DRIE", "Request Large Bulky Item Collection",  "Electronics Waste", "APPLIANCE", "Special Projects Inspection Team (SPIT)", "Litter Basket / Request", "Asbestos")
homeless <- c("Homeless Person Assistance", "Homeless Encampment")
consumer.complaint <- c("Consumer Complaint", "Food Establishment", "Vending", "Cable Complaint")
taxi.complaint <- c("Taxi Complaint", "Taxi Report")
non.emergency.matter <- c("Non-Emergency Police Matter", "Special Enforcement")
animal.concern <- c("Animal Abuse", "Unsanitary Animal Pvt Property", "Animal in a Park")
safety <- c("SAFETY")
rental.car <- c("For Hire Vehicle Complaint")
health.issues <- c("Food Poisoning", "Hazardous Materials", "Smoking", "Industrial Waste")
drugs <- c("Drug Activity", "Drinking")
dof <- c("DOF Literature Request", "SCRIE", "DOF Property - Reduction Issue", "DOF Property - Payment Issue", "DOF Property - Request Copy", "DOF Property - Update Account", "DOT Literature Request", "DOF Parking - Payment Issue", "HPD Literature Request", "DCA / DOH New License Application Request", "DOF Property - Owner Issue", "DPR Internal", "DOF Parking - Tax Exemption")
df$Complaint.New[df$Complaint.Type %in% noise] <- "Noise"
df$Complaint.New[df$Complaint.Type %in% building] <- "Building"
df$Complaint.New[df$Complaint.Type %in% parking] <- "Parking"
df$Complaint.New[df$Complaint.Type %in% traffic] <- "Traffic"
df$Complaint.New[df$Complaint.Type %in% street.condition] <- "Street Condition"
df$Complaint.New[df$Complaint.Type %in% unsanitary.condition] <- "Unsanitary Condition"
df$Complaint.New[df$Complaint.Type %in% graffiti] <- "Graffiti"
df$Complaint.New[df$Complaint.Type %in% rodent] <- "Rodent"
df$Complaint.New[df$Complaint.Type %in% general] <- "General"
df$Complaint.New[df$Complaint.Type %in% homeless] <- "Homeless"
df$Complaint.New[df$Complaint.Type %in% consumer.complaint] <- "Consumer Complaint"
df$Complaint.New[df$Complaint.Type %in% taxi.complaint] <- "Taxi Complaint"
df$Complaint.New[df$Complaint.Type %in% non.emergency.matter] <- "Non Emergency Matter"
df$Complaint.New[df$Complaint.Type %in% animal.concern] <- "Animal Concern"
df$Complaint.New[df$Complaint.Type %in% safety] <- "Safety"
df$Complaint.New[df$Complaint.Type %in% rental.car] <- "Rental Car"
df$Complaint.New[df$Complaint.Type %in% health.issues] <- "Health Issues"
df$Complaint.New[df$Complaint.Type %in% drugs] <- "Drugs"
df$Complaint.New[df$Complaint.Type %in% dof] <- "DOF"
df$Complaint.Date <- as.Date(as.POSIXct(df$Created.Date, format="%m/%d/%Y"))
df$Complaint.Hour <- hour(as.POSIXct(df$Created.Date, format="%m/%d/%Y %I:%M:%S %p"))
df_complaints <- df[,c("Complaint.Hour","Complaint.New")]
df_complaints <- dcast(df_complaints, Complaint.New~Complaint.Hour)
ggparcoord(df_complaints, columns = 2:25, groupColumn = "Complaint.New", scale = "globalminmax")
fn <- function(x) x * 100/max(x, na.rm = TRUE)
df_scaled <- data.frame(lapply(df_complaints[,2:25], fn))
ggparcoord(df_scaled, columns = 2:25, groupColumn = "Complaint.New", scale = "globalminmax")
discparcoord(df_scaled,k=100)
library(discparcoord)
ggparcoord(df_complaints, columns = 2:25, groupColumn = "Complaint.New", scale = "globalminmax")
discparcoord(df_scaled,k=100)
library(cdparcoord)
discparcoord(df_scaled,k=100)
library(cdparcoord)
discparcoord(df_complaints,k=100)
library(cdparcoord)
discparcoord(df_scaled,k=100)
shiny::runApp('Documents/columbia/NYC311/nyc311_shiny')
install.packages('rsconnect')
runApp('Documents/columbia/NYC311/nyc311_shiny')
rsconnect::setAccountInfo(name='odubno', token='2F12F8BFAF2CE7E44A551BBA9C6F7441', secret='fcpXPszrnaMUo3YSCS75sYOOMBR1vjIGQ2B2yLor')
pwd
ls
rsconnect::deployApp('nyc311_shiny/app.R')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311/nyc311_shiny/app')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311/nyc311_shiny/app.R')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311/nyc311_shiny')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311/nyc311_shiny')
deployApp()
library(rsconnect)
library(rsconnect)
deployApp()
devtools::install_github
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311/nyc311_shiny')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311/nyc311_shiny')
library(datasets)
WorldPhones
df <- read.csv("data/311_Feb01-08.csv")
colnames(df)
df <- read.csv("data/311_Feb01-08.csv")
noise <- c("Noise - Residential", "Noise - Street/Sidewalk", "Noise", "Noise - Commercial", "Noise - Vehicle", "Noise - Park", "Noise - Helicopter")
building <- c("HEAT/HOT WATER", "Water System", "PLUMBING", "DOOR/WINDOW", "Sewer", "WATER LEAK", "General Construction/Plumbing", "Building/Use", "ELECTRIC", "FLOORING/STAIRS", "Maintenance or Facility", "Elevator", "Lead", "Plumbing", "Housing - Low Income Senior", "Indoor Air Quality", "Electrical", "Water Conservation", "School Maintenance", "Boilers", "Water Quality", "ELEVATOR", "OUTSIDE BUILDING", "Indoor Sewage", "Non-Residential Heat")
parking <- c("Illegal Parking", "Blocked Driveway", "Derelict Vehicle", "Derelict Vehicles", "Vacant Lot", "Derelict Bicycle")
traffic <- c("Traffic Signal Condition", "Traffic")
street.condition <- c("Street Condition", "Street Light Condition", "Damaged Tree", "New Tree Request", "Overgrown Tree/Branches", "Snow", "Dead/Dying Tree", "Broken Muni Meter", "Root/Sewer/Sidewalk Condition", "Air Quality", "Street Sign - Damaged", "Sidewalk Condition","Street Sign - Missing", "Highway Condition", "Illegal Tree Damage", "Standing Water", "Curb Condition", "Violation of Park Rules", "Street Sign - Dangling", "Broken Parking Meter", "Overflowing Litter Baskets")
unsanitary.condition <- c("UNSANITARY CONDITION", "Sanitation Condition", "Missed Collection (All Materials)", "Dirty Conditions")
graffiti <- c("PAINT/PLASTER", "Graffiti")
rodent <- c("Rodent")
general <- c("GENERAL", "Benefit Card Replacement", "Other Enforcement", "Agency Issues", "Opinion for the Mayor", "Housing Options", "Request Xmas Tree Collection", "DRIE", "Request Large Bulky Item Collection",  "Electronics Waste", "APPLIANCE", "Special Projects Inspection Team (SPIT)", "Litter Basket / Request", "Asbestos")
homeless <- c("Homeless Person Assistance", "Homeless Encampment")
consumer.complaint <- c("Consumer Complaint", "Food Establishment", "Vending", "Cable Complaint")
taxi.complaint <- c("Taxi Complaint", "Taxi Report")
non.emergency.matter <- c("Non-Emergency Police Matter", "Special Enforcement")
animal.concern <- c("Animal Abuse", "Unsanitary Animal Pvt Property", "Animal in a Park")
safety <- c("SAFETY")
rental.car <- c("For Hire Vehicle Complaint")
health.issues <- c("Food Poisoning", "Hazardous Materials", "Smoking", "Industrial Waste")
drugs <- c("Drug Activity", "Drinking")
dof <- c("DOF Literature Request", "SCRIE", "DOF Property - Reduction Issue", "DOF Property - Payment Issue", "DOF Property - Request Copy", "DOF Property - Update Account", "DOT Literature Request", "DOF Parking - Payment Issue", "HPD Literature Request", "DCA / DOH New License Application Request", "DOF Property - Owner Issue", "DPR Internal", "DOF Parking - Tax Exemption")
df$Complaint.New[df$Complaint.Type %in% noise] <- "Noise"
df$Complaint.New[df$Complaint.Type %in% building] <- "Building"
df$Complaint.New[df$Complaint.Type %in% parking] <- "Parking"
df$Complaint.New[df$Complaint.Type %in% traffic] <- "Traffic"
df$Complaint.New[df$Complaint.Type %in% street.condition] <- "Street Condition"
df$Complaint.New[df$Complaint.Type %in% unsanitary.condition] <- "Unsanitary Condition"
df$Complaint.New[df$Complaint.Type %in% graffiti] <- "Graffiti"
df$Complaint.New[df$Complaint.Type %in% rodent] <- "Rodent"
df$Complaint.New[df$Complaint.Type %in% general] <- "General"
df$Complaint.New[df$Complaint.Type %in% homeless] <- "Homeless"
df$Complaint.New[df$Complaint.Type %in% consumer.complaint] <- "Consumer Complaint"
df$Complaint.New[df$Complaint.Type %in% taxi.complaint] <- "Taxi Complaint"
df$Complaint.New[df$Complaint.Type %in% non.emergency.matter] <- "Non Emergency Matter"
df$Complaint.New[df$Complaint.Type %in% animal.concern] <- "Animal Concern"
df$Complaint.New[df$Complaint.Type %in% safety] <- "Safety"
df$Complaint.New[df$Complaint.Type %in% rental.car] <- "Rental Car"
df$Complaint.New[df$Complaint.Type %in% health.issues] <- "Health Issues"
df$Complaint.New[df$Complaint.Type %in% drugs] <- "Drugs"
df$Complaint.New[df$Complaint.Type %in% dof] <- "DOF"
df
unstack(df$Complaint.New)
unstack(formula(df$Complaint.New))
formula(df$Complaint.New)
df$Complaint.New
df[c(Complaint.New, Borough)]
df[c(Complaint.New, Borough), ]
spread(cd, key=Complaint.New, value=Borough)
spread(df, key=Complaint.New, value=Borough)
df[,c(Borough, Complaint.New)]
df <- read.csv("data/311_Feb01-08.csv")
noise <- c("Noise - Residential", "Noise - Street/Sidewalk", "Noise", "Noise - Commercial", "Noise - Vehicle", "Noise - Park", "Noise - Helicopter")
building <- c("HEAT/HOT WATER", "Water System", "PLUMBING", "DOOR/WINDOW", "Sewer", "WATER LEAK", "General Construction/Plumbing", "Building/Use", "ELECTRIC", "FLOORING/STAIRS", "Maintenance or Facility", "Elevator", "Lead", "Plumbing", "Housing - Low Income Senior", "Indoor Air Quality", "Electrical", "Water Conservation", "School Maintenance", "Boilers", "Water Quality", "ELEVATOR", "OUTSIDE BUILDING", "Indoor Sewage", "Non-Residential Heat")
parking <- c("Illegal Parking", "Blocked Driveway", "Derelict Vehicle", "Derelict Vehicles", "Vacant Lot", "Derelict Bicycle")
traffic <- c("Traffic Signal Condition", "Traffic")
street.condition <- c("Street Condition", "Street Light Condition", "Damaged Tree", "New Tree Request", "Overgrown Tree/Branches", "Snow", "Dead/Dying Tree", "Broken Muni Meter", "Root/Sewer/Sidewalk Condition", "Air Quality", "Street Sign - Damaged", "Sidewalk Condition","Street Sign - Missing", "Highway Condition", "Illegal Tree Damage", "Standing Water", "Curb Condition", "Violation of Park Rules", "Street Sign - Dangling", "Broken Parking Meter", "Overflowing Litter Baskets")
unsanitary.condition <- c("UNSANITARY CONDITION", "Sanitation Condition", "Missed Collection (All Materials)", "Dirty Conditions")
graffiti <- c("PAINT/PLASTER", "Graffiti")
rodent <- c("Rodent")
general <- c("GENERAL", "Benefit Card Replacement", "Other Enforcement", "Agency Issues", "Opinion for the Mayor", "Housing Options", "Request Xmas Tree Collection", "DRIE", "Request Large Bulky Item Collection",  "Electronics Waste", "APPLIANCE", "Special Projects Inspection Team (SPIT)", "Litter Basket / Request", "Asbestos")
homeless <- c("Homeless Person Assistance", "Homeless Encampment")
consumer.complaint <- c("Consumer Complaint", "Food Establishment", "Vending", "Cable Complaint")
taxi.complaint <- c("Taxi Complaint", "Taxi Report")
non.emergency.matter <- c("Non-Emergency Police Matter", "Special Enforcement")
animal.concern <- c("Animal Abuse", "Unsanitary Animal Pvt Property", "Animal in a Park")
safety <- c("SAFETY")
rental.car <- c("For Hire Vehicle Complaint")
health.issues <- c("Food Poisoning", "Hazardous Materials", "Smoking", "Industrial Waste")
drugs <- c("Drug Activity", "Drinking")
dof <- c("DOF Literature Request", "SCRIE", "DOF Property - Reduction Issue", "DOF Property - Payment Issue", "DOF Property - Request Copy", "DOF Property - Update Account", "DOT Literature Request", "DOF Parking - Payment Issue", "HPD Literature Request", "DCA / DOH New License Application Request", "DOF Property - Owner Issue", "DPR Internal", "DOF Parking - Tax Exemption")
df$Complaint.New[df$Complaint.Type %in% noise] <- "Noise"
df$Complaint.New[df$Complaint.Type %in% building] <- "Building"
df$Complaint.New[df$Complaint.Type %in% parking] <- "Parking"
df$Complaint.New[df$Complaint.Type %in% traffic] <- "Traffic"
df$Complaint.New[df$Complaint.Type %in% street.condition] <- "Street Condition"
df$Complaint.New[df$Complaint.Type %in% unsanitary.condition] <- "Unsanitary Condition"
df$Complaint.New[df$Complaint.Type %in% graffiti] <- "Graffiti"
df$Complaint.New[df$Complaint.Type %in% rodent] <- "Rodent"
df$Complaint.New[df$Complaint.Type %in% general] <- "General"
df$Complaint.New[df$Complaint.Type %in% homeless] <- "Homeless"
df$Complaint.New[df$Complaint.Type %in% consumer.complaint] <- "Consumer Complaint"
df$Complaint.New[df$Complaint.Type %in% taxi.complaint] <- "Taxi Complaint"
df$Complaint.New[df$Complaint.Type %in% non.emergency.matter] <- "Non Emergency Matter"
df$Complaint.New[df$Complaint.Type %in% animal.concern] <- "Animal Concern"
df$Complaint.New[df$Complaint.Type %in% safety] <- "Safety"
df$Complaint.New[df$Complaint.Type %in% rental.car] <- "Rental Car"
df$Complaint.New[df$Complaint.Type %in% health.issues] <- "Health Issues"
df$Complaint.New[df$Complaint.Type %in% drugs] <- "Drugs"
df$Complaint.New[df$Complaint.Type %in% dof] <- "DOF"
df[,c(Borough, Complaint.New)]
df
df[,c(Borough, Complaint.New)]
df$Borough
select(df, Borough)
select(df, Borough, Complaint$New)
select(df, Borough, Complaint.New)
df_select <- select(df, Borough, Complaint.New)
spread(Borough, key=Complaint.New, value=Borough)
spread(df_select, key=Complaint.New, value=Borough)
spread(df_select, key=Borough, value=Complaint.New)
dcast(df_select, Borough ~ Complaint.New)
dcast(df_select, Complaint.New ~ Borough)
df_select <- select(df, Borough, Complaint.New)
df_filter <- dcast(df_select, Complaint.New ~ Borough)
df_filter
colnames(df_filter)
runApp('Documents/columbia/NYC311/nyc311_shiny')
library(datasets)
df <- read.csv('data/WorldPhones.csv')
library(datasets)
df <- read.csv('nyc311_shiny/data/WorldPhones.csv')
WorldPhones
df
library(datasets)
df <- read.csv('nyc311_shiny/data/WorldPhones.csv', index=TRUE)
WorldPhones
df[-1]
result <- df[-1]
df```
df
WorldPhones
result <- df[-1]
row.names(result) <- df$X
result <- df[-1]
row.names(result) <- df$X
result
runApp('Documents/columbia/NYC311/nyc311_shiny')
runApp('Documents/columbia/NYC311/nyc311_shiny')
runApp('Documents/columbia/NYC311/nyc311_shiny')
df <- read.csv("data/311_Feb01-08.csv")
df <- read.csv("data/311_Feb01-08.csv")
df <- read.csv("nyc311_shiny/data/311_Feb01-08.csv")
noise <- c("Noise - Residential", "Noise - Street/Sidewalk", "Noise", "Noise - Commercial", "Noise - Vehicle", "Noise - Park", "Noise - Helicopter")
building <- c("HEAT/HOT WATER", "Water System", "PLUMBING", "DOOR/WINDOW", "Sewer", "WATER LEAK", "General Construction/Plumbing", "Building/Use", "ELECTRIC", "FLOORING/STAIRS", "Maintenance or Facility", "Elevator", "Lead", "Plumbing", "Housing - Low Income Senior", "Indoor Air Quality", "Electrical", "Water Conservation", "School Maintenance", "Boilers", "Water Quality", "ELEVATOR", "OUTSIDE BUILDING", "Indoor Sewage", "Non-Residential Heat")
parking <- c("Illegal Parking", "Blocked Driveway", "Derelict Vehicle", "Derelict Vehicles", "Vacant Lot", "Derelict Bicycle")
traffic <- c("Traffic Signal Condition", "Traffic")
street.condition <- c("Street Condition", "Street Light Condition", "Damaged Tree", "New Tree Request", "Overgrown Tree/Branches", "Snow", "Dead/Dying Tree", "Broken Muni Meter", "Root/Sewer/Sidewalk Condition", "Air Quality", "Street Sign - Damaged", "Sidewalk Condition","Street Sign - Missing", "Highway Condition", "Illegal Tree Damage", "Standing Water", "Curb Condition", "Violation of Park Rules", "Street Sign - Dangling", "Broken Parking Meter", "Overflowing Litter Baskets")
unsanitary.condition <- c("UNSANITARY CONDITION", "Sanitation Condition", "Missed Collection (All Materials)", "Dirty Conditions")
graffiti <- c("PAINT/PLASTER", "Graffiti")
rodent <- c("Rodent")
general <- c("GENERAL", "Benefit Card Replacement", "Other Enforcement", "Agency Issues", "Opinion for the Mayor", "Housing Options", "Request Xmas Tree Collection", "DRIE", "Request Large Bulky Item Collection",  "Electronics Waste", "APPLIANCE", "Special Projects Inspection Team (SPIT)", "Litter Basket / Request", "Asbestos")
homeless <- c("Homeless Person Assistance", "Homeless Encampment")
consumer.complaint <- c("Consumer Complaint", "Food Establishment", "Vending", "Cable Complaint")
taxi.complaint <- c("Taxi Complaint", "Taxi Report")
non.emergency.matter <- c("Non-Emergency Police Matter", "Special Enforcement")
animal.concern <- c("Animal Abuse", "Unsanitary Animal Pvt Property", "Animal in a Park")
safety <- c("SAFETY")
rental.car <- c("For Hire Vehicle Complaint")
health.issues <- c("Food Poisoning", "Hazardous Materials", "Smoking", "Industrial Waste")
drugs <- c("Drug Activity", "Drinking")
dof <- c("DOF Literature Request", "SCRIE", "DOF Property - Reduction Issue", "DOF Property - Payment Issue", "DOF Property - Request Copy", "DOF Property - Update Account", "DOT Literature Request", "DOF Parking - Payment Issue", "HPD Literature Request", "DCA / DOH New License Application Request", "DOF Property - Owner Issue", "DPR Internal", "DOF Parking - Tax Exemption")
df$Complaint.New[df$Complaint.Type %in% noise] <- "Noise"
df$Complaint.New[df$Complaint.Type %in% building] <- "Building"
df$Complaint.New[df$Complaint.Type %in% parking] <- "Parking"
df$Complaint.New[df$Complaint.Type %in% traffic] <- "Traffic"
df$Complaint.New[df$Complaint.Type %in% street.condition] <- "Street Condition"
df$Complaint.New[df$Complaint.Type %in% unsanitary.condition] <- "Unsanitary Condition"
df$Complaint.New[df$Complaint.Type %in% graffiti] <- "Graffiti"
df$Complaint.New[df$Complaint.Type %in% rodent] <- "Rodent"
df$Complaint.New[df$Complaint.Type %in% general] <- "General"
df$Complaint.New[df$Complaint.Type %in% homeless] <- "Homeless"
df$Complaint.New[df$Complaint.Type %in% consumer.complaint] <- "Consumer Complaint"
df$Complaint.New[df$Complaint.Type %in% taxi.complaint] <- "Taxi Complaint"
df$Complaint.New[df$Complaint.Type %in% non.emergency.matter] <- "Non Emergency Matter"
df$Complaint.New[df$Complaint.Type %in% animal.concern] <- "Animal Concern"
df$Complaint.New[df$Complaint.Type %in% safety] <- "Safety"
df$Complaint.New[df$Complaint.Type %in% rental.car] <- "Rental Car"
df$Complaint.New[df$Complaint.Type %in% health.issues] <- "Health Issues"
df$Complaint.New[df$Complaint.Type %in% drugs] <- "Drugs"
df$Complaint.New[df$Complaint.Type %in% dof] <- "DOF"
df_select <- select(df, Borough, Complaint.New)
df_filter <- dcast(df_select, Complaint.New ~ Borough)
colnames(df_filter)
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311/nyc311_shiny')
library(dplyr)
# load data
df <- read.csv("data/311_feb.csv")
# get top 15 complaints
w = table(df$Complaint.Type)
t = as.data.frame(w)
names(t)[1] = 'Complaint.Type'
ct <- head(t[order(t$Freq, decreasing = TRUE),c(1,2)], 15)$Complaint.Type
df_complaints <- df[df$Complaint.Type %in% ct,]
df_complaints$Complaint.Date <- as.Date(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y"))
df_complaints$Complaint.Hour <- hour(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y %I:%M:%S %p"))
library(dplyr)
library(lubridate)
library(GGally)
# load data
df <- read.csv("data/311_feb.csv")
# get top 15 complaints
w = table(df$Complaint.Type)
t = as.data.frame(w)
names(t)[1] = 'Complaint.Type'
ct <- head(t[order(t$Freq, decreasing = TRUE),c(1,2)], 15)$Complaint.Type
df_complaints <- df[df$Complaint.Type %in% ct,]
df_complaints$Complaint.Date <- as.Date(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y"))
df_complaints$Complaint.Hour <- hour(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y %I:%M:%S %p"))
df_borough <- df_complaints[,c("Borough","Complaint.Hour")]
df_borough <- dcast(df_borough, Borough~Complaint.Hour)
library(dplyr)
library(lubridate)
library(GGally)
library(reshape2)
# load data
df <- read.csv("data/311_feb.csv")
# get top 15 complaints
w = table(df$Complaint.Type)
t = as.data.frame(w)
names(t)[1] = 'Complaint.Type'
ct <- head(t[order(t$Freq, decreasing = TRUE),c(1,2)], 15)$Complaint.Type
df_complaints <- df[df$Complaint.Type %in% ct,]
df_complaints$Complaint.Date <- as.Date(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y"))
df_complaints$Complaint.Hour <- hour(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y %I:%M:%S %p"))
df_borough <- df_complaints[,c("Borough","Complaint.Hour")]
df_borough <- dcast(df_borough, Borough~Complaint.Hour)
write.csv(df_borough, row.names=F, file = "311_borough.csv")
ggparcoord(df_borough, columns = 2:25, groupColumn = "Borough", scale = "globalminmax")
shiny::runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
install.packages("shinydashboard")
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311Project/nyc311_shiny')
runApp('Documents/columbia/NYC311Project/nyc311_shiny')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311Project/nyc311_shiny')
library(ggplot2)
library(ggmap)
df <- read.csv("data/311_feb.csv")
df_lat_lon <- data.frame(lon=df$Longitude, lat=df$Latitude)
coord <- data.frame(lon = -74.00594, lat = 40.71278)
map.NY12 <- get_map(location=c(lon=coord$lon,lat=coord$lat+0.02),zoom=11, source = "stamen", maptype = "toner-lite")
ggmap(map.NY12, extent = "device") +
stat_density2d(data = df_lat_lon,
aes(x = lon, y = lat, fill = ..level.., alpha = ..level..), size = 0.1,
bins = 100, geom = "polygon") +
geom_density2d(data = df_lat_lon, aes(x = lon, y = lat), size = 0.1, alpha = 0.8) +
scale_fill_gradient(low = "green", high = "red") +
scale_alpha(range = c(0.1, 0.4), guide = FALSE)
shiny::runApp('Documents/columbia/NYC311Project/nyc311app')
runApp('Documents/columbia/NYC311Project/nyc311app')
rsconnect::deployApp('/Users/olehdubno/Documents/columbia/NYC311Project/nyc311app')
library(dplyr)
library(lubridate)
library(GGally)
library(reshape2)
# load data
df <- read.csv("data/311_feb.csv")
# get top 15 complaints
w = table(df$Complaint.Type)
t = as.data.frame(w)
names(t)[1] = 'Complaint.Type'
ct <- head(t[order(t$Freq, decreasing = TRUE),c(1,2)], 15)$Complaint.Type
df_complaints <- df[df$Complaint.Type %in% ct,]
df_complaints$Complaint.Date <- as.Date(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y"))
df_complaints$Complaint.Hour <- hour(as.POSIXct(df_complaints$Created.Date, format="%m/%d/%Y %I:%M:%S %p"))
df_borough <- df_complaints[,c("Borough","Complaint.Hour")]
df_borough <- dcast(df_borough, Borough~Complaint.Hour)
names(df_borough) <- c("Borough", "Midnight", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "Noon", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23")
write.csv(df_borough, row.names=F, file = "311_borough.csv")
shiny::runApp('Documents/columbia/NYC311Project/nyc311app')
